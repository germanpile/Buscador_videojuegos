# Lista inicial de videojuegos
videojuegos = [
    {"nombre": "The Legend of Zelda: Breath of the Wild", "precio": 60, "género": "Aventura", "plataforma": "Nintendo Switch", "año_salida": "2017", "tienda": "Game"},
    {"nombre": "Final Fantasy VII remake", "precio": 60, "género": "RPG", "plataforma": "PlayStation 4", "año_salida": "2020", "tienda": "Game"},
    {"nombre": "Final Fantasy VII remake", "precio": 60, "género": "RPG", "plataforma": "PlayStation 5", "año_salida": "2020", "tienda": "Game"},
    {"nombre": "Final Fantasy VII remake", "precio": 60, "género": "RPG", "plataforma": "PC", "año_salida": "2020", "tienda": "Steam"},
    {"nombre": "Final Fantasy VII rebirth", "precio": 70, "género": "RPG", "plataforma": "PlayStation 5", "año_salida": "2024", "tienda": "Game"},
    {"nombre": "Final Fantasy VII rebirth", "precio": 70, "género": "RPG", "plataforma": "Xbox", "año_salida": "2024", "tienda": "Game"},
    {"nombre": "Final Fantasy VII rebirth", "precio": 70, "género": "RPG", "plataforma": "PC", "año_salida": "2024", "tienda": "Steam"},
    {"nombre": "Final Fantasy XVI", "precio": 70, "género": "RPG", "plataforma": "PlayStation 5", "año_salida": "2023", "tienda": "Game"},
    {"nombre": "Final Fantasy XVI", "precio": 70, "género": "RPG", "plataforma": "PC", "año_salida": "2023", "tienda": "Steam"},
    {"nombre": "Resident evil 4 remake", "precio": 60, "género": "Survival horror", "plataforma": "PlayStation 4", "año_salida": "2023", "tienda": "Fnac"},
    {"nombre": "Resident evil 4 remake", "precio": 60, "género": "Survival horror", "plataforma": "PlayStation 5", "año_salida": "2023", "tienda": "Media Markt"},
    {"nombre": "Resident evil 4 remake", "precio": 60, "género": "Survival horror", "plataforma": "Xbox", "año_salida": "2023", "tienda": "Game"},
    {"nombre": "Resident evil 4 remake", "precio": 60, "género": "Survival horror", "plataforma": "PC", "año_salida": "2023", "tienda": "Steam"},
    {"nombre": "Resident evil 3 remake", "precio": 40, "género": "Survival horror", "plataforma": "PlayStation 4", "año_salida": "2020", "tienda": "Media Markt"},
    {"nombre": "Resident evil 3 remake", "precio": 40, "género": "Survival horror", "plataforma": "PlayStation 5", "año_salida": "2020", "tienda": "Fnac"},
    {"nombre": "Resident evil 3 remake", "precio": 40, "género": "Survival horror", "plataforma": "Xbox", "año_salida": "2020", "tienda": "Game"},
    {"nombre": "Resident evil 3 remake", "precio": 40, "género": "Survival horror", "plataforma": "PC", "año_salida": "2020", "tienda": "Steam"},
    {"nombre": "Resident evil 2 remake", "precio": 40, "género": "Survival horror", "plataforma": "PlayStation 4", "año_salida": "2019", "tienda": "Game"},
    {"nombre": "Resident evil 2 remake", "precio": 40, "género": "Survival horror", "plataforma": "PlayStation 5", "año_salida": "2019", "tienda": "Media Markt"},
    {"nombre": "Resident evil 2 remake", "precio": 40, "género": "Survival horror", "plataforma": "Xbox", "año_salida": "2019", "tienda": "El Corte Inglés"},
    {"nombre": "Resident evil 2 remake", "precio": 40, "género": "Survival horror", "plataforma": "PC", "año_salida": "2019", "tienda": "Steam"},
    {"nombre": "Resident evil 7", "precio": 60, "género": "Survival horror", "plataforma": "PlayStation 4", "año_salida": "2017", "tienda": "Game"},
    {"nombre": "Resident evil 7", "precio": 60, "género": "Survival horror", "plataforma": "PlayStation 5", "año_salida": "2017", "tienda": "El Corte Inglés"},
    {"nombre": "Resident evil 7", "precio": 60, "género": "Survival horror", "plataforma": "PC", "año_salida": "2017", "tienda": "Steam"},
    {"nombre": "Resident evil 7", "precio": 60, "género": "Survival horror", "plataforma": "Xbox", "año_salida": "2017", "tienda": "Fnac"},
    {"nombre": "Resident evil Village", "precio": 60, "género": "Survival horror", "plataforma": "PlayStation 4", "año_salida": "2021", "tienda": "Media Markt"},
    {"nombre": "Resident evil Village", "precio": 60, "género": "Survival horror", "plataforma": "PlayStation 5", "año_salida": "2021", "tienda": "Fnac"},
    {"nombre": "Resident evil Village", "precio": 60, "género": "Survival horror", "plataforma": "Xbox", "año_salida": "2021", "tienda": "Game"},
    {"nombre": "Resident evil Village", "precio": 60, "género": "Survival horror", "plataforma": "PC", "año_salida": "2021", "tienda": "Steam"},
    {"nombre": "God of war III", "precio": 20, "género": "Hack and slash", "plataforma": "PlayStation 3", "año_salida": "2010", "tienda": "Fnac"},
    {"nombre": "God of war", "precio": 60, "género": "Aventura", "plataforma": "PlayStation 4", "año_salida": "2018", "tienda": "Game"},
    {"nombre": "God of war", "precio": 60, "género": "Aventura", "plataforma": "Xbox", "año_salida": "2018", "tienda": "Media Markt"},
    {"nombre": "God of war", "precio": 60, "género": "Aventura", "plataforma": "PC", "año_salida": "2018", "tienda": "Steam"},
    {"nombre": "God of war Ragnarok", "precio": 60, "género": "Aventura", "plataforma": "PlayStation 4", "año_salida": "2022", "tienda": "El Corte Inglés"},
    {"nombre": "God of war Ragnarok", "precio": 60, "género": "Aventura", "plataforma": "PlayStation 5", "año_salida": "2022", "tienda": "Game"},
    {"nombre": "God of war Ragnarok", "precio": 60, "género": "Aventura", "plataforma": "Xbox", "año_salida": "2022", "tienda": "Media Markt"},
    {"nombre": "God of war Ragnarok", "precio": 60, "género": "Aventura", "plataforma": "PC", "año_salida": "2022", "tienda": "Steam"},
    {"nombre": "Devil may cry", "precio": 10, "género": "Hack and slash", "plataforma": "PlayStation2", "año_salida": "2001", "tienda": "Media Markt"},
    {"nombre": "Devil may cry 2", "precio": 10, "género": "Hack and slash", "plataforma": "Nintendo Switch", "año_salida": "2003", "tienda": "Tienda A"},
    {"nombre": "Devil may cry 3", "precio": 15, "género": "Hack and slash", "plataforma": "Nintendo Switch", "año_salida": "2005", "tienda": "Game"},
    {"nombre": "Devil may cry 4", "precio": 20, "género": "Hack and slash", "plataforma": "Nintendo Switch", "año_salida": "2008", "tienda": "Fnac"},
    {"nombre": "Devil may cry 5", "precio": 40, "género": "Hack and slash", "plataforma": "Nintendo Switch", "año_salida": "2019", "tienda": "El Corte Inglés"},
    {"nombre": "Bayonetta 3", "precio": 50, "género": "Hack and slash", "plataforma": "Nintendo Switch", "año_salida": "2022", "tienda": "Game"},
    {"nombre": "The Legend of Zelda: Ocarina of time HD", "precio": 30, "género": "Aventura", "plataforma": "Nintendo 3DS", "año_salida": "2011", "tienda": "Media Markt"},
    {"nombre": "The Legend of Zelda: The Wind Waker", "precio": 20, "género": "Aventura", "plataforma": "Nintendo Gamecube", "año_salida": "2003", "tienda": "Game"},
    {"nombre": "The Legend of Zelda: The Wind Waker HD", "precio": 40, "género": "Aventura", "plataforma": "Wii U ", "año_salida": "2013", "tienda": "El Corte Inglés"},
    {"nombre": "The Legend of Zelda: Twilight Princess", "precio": 20, "género": "Aventura", "plataforma": "Nintendo Gamecube", "año_salida": "2006", "tienda": "Media Markt"},
    {"nombre": "The Legend of Zelda: Twilight Princess", "precio": 20, "género": "Aventura", "plataforma": "Wii", "año_salida": "2006", "tienda": "Game"},
    {"nombre": "The Legend of Zelda: Twilight Princess HD", "precio": 40, "género": "Aventura", "plataforma": "Wii U", "año_salida": "2016", "tienda": "Fnac"},
    {"nombre": "The Legend of Zelda: Tears of the Kingdom", "precio": 60, "género": "Aventura", "plataforma": "Nintendo Switch", "año_salida": "2023", "tienda": "Game"},
    {"nombre": "Tomb Raider", "precio": 30, "género": "Aventura", "plataforma": "PC", "año_salida": "2013", "tienda": "Steam"},
    {"nombre": "Tomb Raider", "precio": 30, "género": "Aventura", "plataforma": "Xbox", "año_salida": "2013", "tienda": "Game"},
    {"nombre": "Tomb Raider", "precio": 30, "género": "Aventura", "plataforma": "PlayStation 4", "año_salida": "2013", "tienda": "Game"},
    {"nombre": "Tomb Raider", "precio": 30, "género": "Aventura", "plataforma": "PlayStation 3", "año_salida": "2013", "tienda": "Fnac"},
    {"nombre": "Rise of the Tomb Raider", "precio": 50, "género": "Aventura", "plataforma": "PlayStation 4", "año_salida": "2015", "tienda": "Game"},
    {"nombre": "Rise of the Tomb Raider", "precio": 50, "género": "Aventura", "plataforma": "Xbox", "año_salida": "2015", "tienda": "Media Markt"},
    {"nombre": "Rise of the Tomb Raider", "precio": 50, "género": "Aventura", "plataforma": "PC", "año_salida": "2015", "tienda": "Steam"},
    {"nombre": "Rise of the Tomb Raider", "precio": 50, "género": "Aventura", "plataforma": "PlayStation 5", "año_salida": "2015", "tienda": "Game"},
    {"nombre": "Shadow of the Tomb Raider", "precio": 50, "género": "Aventura", "plataforma": "PlayStation 4", "año_salida": "2018", "tienda": "El Corte Inglés"},
    {"nombre": "Shadow of the Tomb Raider", "precio": 50, "género": "Aventura", "plataforma": "PC", "año_salida": "2018", "tienda": "Steam"},
    {"nombre": "Shadow of the Tomb Raider", "precio": 50, "género": "Aventura", "plataforma": "PlayStation 5", "año_salida": "2018", "tienda": "Game"},
    {"nombre": "Shadow of the Tomb Raider", "precio": 50, "género": "Aventura", "plataforma": "Xbox", "año_salida": "2018", "tienda": "El Corte Inglés"},
    {"nombre": "Super Mario odyssey", "precio": 60, "género": "Plataformas", "plataforma": "Nintendo Switch", "año_salida": "2017", "tienda": "Fnac"},
    {"nombre": "Super Mario bros U Deluxe", "precio": 40, "género": "Plataformas", "plataforma": "Wii U", "año_salida": "2019", "tienda": "Game"},
    {"nombre": "Mario Kart 8 Deluxe", "precio": 60, "género": "Carreras", "plataforma": "Nintendo Switch", "año_salida": "2017", "tienda": "El Corte Inglés"},
    {"nombre": "Super Mario galaxy", "precio": 20, "género": "Plataformas", "plataforma": "Wii", "año_salida": "2007", "tienda": "Game"},
    {"nombre": "Super Mario galaxy 2", "precio": 40, "género": "Plataformas", "plataforma": "Wii", "año_salida": "2010", "tienda": "Fnac"},
    {"nombre": "Silent Hill 2 remake", "precio": 60, "género": "Survival horror", "plataforma": "PlayStation 5", "año_salida": "2024", "tienda": "Media Markt"},
    {"nombre": "Silent Hill 2 remake", "precio": 60, "género": "Survival horror", "plataforma": "Xbox", "año_salida": "2024", "tienda": "Game"},
    {"nombre": "Dark Souls remastered", "precio": 40, "género": "RPG", "plataforma": "PlayStation 4", "año_salida": "2018", "tienda": "El Corte Inglés"},
    {"nombre": "Dark Souls II", "precio": 20, "género": "RPG", "plataforma": "PlayStation 3", "año_salida": "2014", "tienda": "Game"},
    {"nombre": "Dark Souls II", "precio": 20, "género": "RPG", "plataforma": "Xbox", "año_salida": "2014", "tienda": "Fnac"},
    {"nombre": "Dark Souls III", "precio": 50, "género": "RPG", "plataforma": "PlayStation 4", "año_salida": "2016", "tienda": "Game"},
    {"nombre": "Dark Souls III", "precio": 50, "género": "RPG", "plataforma": "Xbox", "año_salida": "2016", "tienda": "Media Markt"},
    {"nombre": "Dark Souls III", "precio": 50, "género": "RPG", "plataforma": "PC", "año_salida": "2016", "tienda": "Steam"},
    {"nombre": "Elden Ring", "precio": 60, "género": "RPG", "plataforma": "PlayStation 4", "año_salida": "2022", "tienda": "Game"},
    {"nombre": "Elden Ring", "precio": 60, "género": "RPG", "plataforma": "PlayStation 5", "año_salida": "2022", "tienda": "El Corte Inglés"},
    {"nombre": "Elden Ring", "precio": 60, "género": "RPG", "plataforma": "PC", "año_salida": "2022", "tienda": "Steam"},
    {"nombre": "Elden Ring", "precio": 60, "género": "RPG", "plataforma": "Xbox", "año_salida": "2022", "tienda": "Game"},
    {"nombre": "Black myth: Wukong", "precio": 70, "género": "RPG", "plataforma": "PS5", "año_salida": "2024", "tienda": "Fnac"},
    {"nombre": "Black myth: Wukong", "precio": 70, "género": "RPG", "plataforma": "Xbox", "año_salida": "2024", "tienda": "Game"},
    {"nombre": "Black myth: Wukong", "precio": 70, "género": "RPG", "plataforma": "PC", "año_salida": "2024", "tienda": "Steam"},
    {"nombre": "Persona 5 Royal", "precio": 50, "género": "RPG", "plataforma": "Xbox", "año_salida": "2020", "tienda": "Game"},
    {"nombre": "Persona 5 Royal", "precio": 50, "género": "RPG", "plataforma": "PlayStation 4", "año_salida": "2020", "tienda": "Fnac"},
    {"nombre": "Persona 5 Royal", "precio": 50, "género": "RPG", "plataforma": "PlayStation 5", "año_salida": "2020", "tienda": "Game"},
    {"nombre": "Persona 5 Royal", "precio": 50, "género": "RPG", "plataforma": "PC", "año_salida": "2020", "tienda": "Steam"},
    {"nombre": "Persona 5 Royal", "precio": 50, "género": "RPG", "plataforma": "Nintendo Switch", "año_salida": "2020", "tienda": "Game"},
    {"nombre": "Cyberpunk 2077", "precio": 50, "género": "RPG", "plataforma": "Xbox", "año_salida": "2020", "tienda": "Game"},
    {"nombre": "Cyberpunk 2077", "precio": 50, "género": "RPG", "plataforma": "PC", "año_salida": "2020", "tienda": "Steam"},
    {"nombre": "Cyberpunk 2077", "precio": 50, "género": "RPG", "plataforma": "PlayStation 4", "año_salida": "2020", "tienda": "Game"},
    {"nombre": "Cyberpunk 2077", "precio": 50, "género": "RPG", "plataforma": "PlayStation 5", "año_salida": "2020", "tienda": "Fnac"},

]

def quicksort(videojuegos, clave):
    """
    Ordena la lista de videojuegos usando QuickSort según la clave especificada (e.g., 'precio').
    """
    if len(videojuegos) <= 1:
        return videojuegos
    else:
        pivote = videojuegos[0]
        menores = [juego for juego in videojuegos[1:] if juego[clave] <= pivote[clave]]
        mayores = [juego for juego in videojuegos[1:] if juego[clave] > pivote[clave]]
        return quicksort(menores, clave) + [pivote] + quicksort(mayores, clave)


def busqueda_binaria_multiples_resultados(videojuegos, precio):
    izquierda = 0
    derecha = len(videojuegos) - 1
    encontrado = -1  # Para almacenar la posición donde se encuentra el precio inicialmente
    
    # Búsqueda binaria para encontrar una ocurrencia
    while izquierda <= derecha:
        medio = (izquierda + derecha) // 2
        if videojuegos[medio]['precio'] == precio:
            encontrado = medio
            break
        elif videojuegos[medio]['precio'] < precio:
            izquierda = medio + 1
        else:
            derecha = medio - 1

    # Si no se encontró el precio, regresar una lista vacía
    if encontrado == -1:
        return []

    # Recorrer hacia la izquierda y hacia la derecha para encontrar más coincidencias
    resultados = []
    
    # Buscar hacia la izquierda
    i = encontrado
    while i >= 0 and videojuegos[i]['precio'] == precio:
        resultados.append(videojuegos[i])
        i -= 1

    # Buscar hacia la derecha
    i = encontrado + 1
    while i < len(videojuegos) and videojuegos[i]['precio'] == precio:
        resultados.append(videojuegos[i])
        i += 1

    return resultados


def buscar_videojuegos(videojuegos):
    """
    Permite al usuario buscar videojuegos según diferentes parámetros.
    """
    print("¡Bienvenido al buscador de videojuegos!\n")
    print("Opciones de búsqueda:")
    print("1. Buscar por nombre")
    print("2. Buscar por precio")
    print("3. Buscar por género")
    print("4. Buscar por plataformas")
    print("5. Buscar por año de salida")
    print("6. Buscar por tienda")
    print("7. Salir")

    while True:
        opcion = input("\nElige una opción (1-7): ").strip()

        if opcion == "1":
            nombre = input("Introduce el nombre del videojuego: ").strip()
            resultados = [juego for juego in videojuegos if nombre.lower() in juego['nombre'].lower()]
        
        elif opcion == "2":
            try:
                precio = float(input("Introduce el precio del videojuego: ").strip())
                # Ordenar la lista por precio antes de realizar la búsqueda binaria
                print("\nOrdenando videojuegos por precio...")
                videojuegos_ordenados = quicksort(videojuegos, 'precio')
                
                # DEBUG: Mostrar la lista ordenada para verificar
                print("Lista ordenada por precio:")
                for juego in videojuegos_ordenados:
                    print(f"{juego['nombre']} - {juego['precio']}€")
                
                resultados = busqueda_binaria_multiples_resultados(videojuegos_ordenados, precio)
            except ValueError:
                print("Error: Introduce un número válido para el precio.")
                continue
        
        elif opcion == "3":
            genero = input("Introduce el género del videojuego: ").strip()
            resultados = [juego for juego in videojuegos if genero.lower() in juego['género'].lower()]
        
        elif opcion == "4":
            plataforma = input("Introduce la plataforma del videojuego: ").strip()
            resultados = [juego for juego in videojuegos if plataforma.lower() in juego['plataforma'].lower()]

        elif opcion == "5":
            año_salida = input("Introduce el año de salida del videojuego: ").strip()
            resultados = [juego for juego in videojuegos if año_salida.lower() in juego['año_salida'].lower()]
        
        elif opcion == "6":
            tienda = input("Introduce el nombre de la tienda: ").strip()
            resultados = [juego for juego in videojuegos if tienda.lower() == juego['tienda'].lower()]
        
        elif opcion == "7":
            print("¡Gracias por usar el buscador de videojuegos! Hasta pronto.")
            break
        
        else:
            print("Opción no válida. Por favor, elige una opción entre 1 y 7.")
            continue

        # Mostrar resultados
        if resultados:
            print("\nResultados encontrados:")
            for juego in resultados:
                print(f"- {juego['nombre']} , Precio: {juego['precio']}€ , Género: {juego['género']} , Plataformas: {juego['plataforma']} , Año: {juego['año_salida']} , Tienda: {juego['tienda']}")
        else:
            print("\nNo se encontraron resultados.")


# Ejecutar el buscador
buscar_videojuegos(videojuegos)

